const personagem=document.getElementById("personagem"),inimigo=document.getElementById("inimigo"),cenario=document.getElementById("cenario"),botaoReiniciar=document.getElementById("reiniciar"),botaoIniciar=document.getElementById("iniciar"),bloco=document.getElementById("bloco"),tempo=document.getElementById("tempo"),vidas=document.getElementById("vidas"),moedas=document.getElementById("moedas"),pontos=document.getElementById("pontos"),audioEsperando=document.getElementById("audioEsperando"),audioJogoNormal=document.getElementById("audioJogoNormal"),audioPulo=document.getElementById("audioPulo"),audioMoeda=document.getElementById("audioMoeda"),audioVidaExtra=document.getElementById("audioVidaExtra"),audioPerdeuVida=document.getElementById("audioPerdeuVida"),audioGameOver=document.getElementById("audioGameOver"),audioMissaoRapido=document.getElementById("audioMissaoRapido"),audioTempoAcabando=document.getElementById("audioTempoAcabando"),larguraCenario=cenario.offsetWidth,larguraPersonagem=personagem.offsetWidth;let posicao=0,direcao=0,velocidade=10,tempoAtual=43,jogoIniciado=!1,vidasAtual=parseInt(localStorage.getItem("vidasAtual"))||3;vidas.textContent=vidasAtual;let moedasAtual=parseInt(localStorage.getItem("moedasAtual"))||0;moedas.textContent=moedasAtual;let pontosAtual=parseInt(localStorage.getItem("pontosAtual"))||0;pontos.textContent=pontosAtual;let checarMovimentos,checarColisaoComInimigo,checarColisaoComBloco,checarRelogio,checarPulo,colidiu=!1;function hrsAtual(){const a=document.getElementById("horasReal"),b=new Date,c=b.getHours(),d=b.getMinutes(),e=b.getSeconds();a.innerHTML=`<strong>HORAS:</strong> ${c}:${d}:${e}`}setInterval(hrsAtual,1e3);function teclaPressionada(a){"ArrowRight"===a.key?(direcao=1,personagem.style.backgroundImage="url(/imagens/eu1.png)"):"ArrowLeft"===a.key?(direcao=-1,personagem.style.backgroundImage="url(/imagens/eu1.png)"):"Space"===a.code&&(personagem.classList.add("puloPersonagem"),audioPulo.play(),colidiu?clearTimeout(checarPulo):(colidiu=!1,checarPulo=setTimeout(()=>{personagem.classList.remove("puloPersonagem")},500)))}function teclaSolta(a){"ArrowRight"===a.key?(direcao=0,personagem.style.backgroundImage="url(/imagens/eu1.png)"):"ArrowLeft"===a.key&&(direcao=0,personagem.style.backgroundImage="url(/imagens/eu1.png)")}function atualizarMovimentos(){posicao+=direcao*velocidade,0>posicao?posicao=0:posicao+larguraPersonagem>larguraCenario&&(posicao=larguraCenario-larguraPersonagem),personagem.style.left=posicao+"px"}function colisaoComBloco(){const a=personagem.getBoundingClientRect(),b=bloco.getBoundingClientRect();b.left<a.right&&b.right>a.left&&b.top<a.bottom&&b.bottom>a.top&&(clearInterval(checarColisaoComBloco),moedasAtual++,moedas.textContent=moedasAtual,localStorage.setItem("moedasAtual",moedasAtual),pontosAtual+=10,pontos.textContent=pontosAtual,localStorage.setItem("pontosAtual",pontosAtual),audioMoeda.play(),checarMoedas(),bloco.style.top="390px",setTimeout(()=>{checarColisaoComBloco=setInterval(colisaoComBloco,10),bloco.style.top="420px"},250))}function colisaoComInimigo(){const a=personagem.getBoundingClientRect(),b=inimigo.getBoundingClientRect();b.left<a.right&&b.right>a.left&&b.top<a.bottom&&b.bottom>a.top&&(clearInterval(checarMovimentos),clearTimeout(checarPulo),removerTeclas(),clearInterval(checarRelogio),clearInterval(checarColisaoComInimigo),vidasAtual--,vidas.textContent=vidasAtual,localStorage.setItem("vidasAtual",vidasAtual),personagem.style.backgroundImage="url(/imagens/eu33.jpg)",inimigo.style.display="none",colidiu=!0,audioJogoNormal.volume=0,audioMissaoRapido.volume=0,audioPerdeuVida.play(),setTimeout(()=>{checarJogo()},3300))}botaoReiniciar.addEventListener("click",function(){moedasAtual=0,moedas.textContent=moedasAtual,localStorage.setItem("moedasAtual",moedasAtual),pontosAtual=0,pontos.textContent=pontosAtual,localStorage.setItem("pontosAtual",pontosAtual),vidasAtual=3,vidas.textContent=vidasAtual,localStorage.setItem("vidasAtual",vidasAtual),location.reload()});function checarMoedas(){5===moedasAtual&&(moedasAtual=0,moedas.textContent=moedasAtual,vidasAtual++,vidas.textContent=vidasAtual,audioVidaExtra.play())}function relogio(){tempoAtual--,tempo.textContent=tempoAtual,15===tempoAtual?(audioJogoNormal.volume=0,audioTempoAcabando.play(),setTimeout(()=>{audioJogoNormal.volume=0,audioTempoAcabando.volume=0,audioMissaoRapido.play(),audioMissaoRapido.volume=.5},3e3)):0===tempoAtual&&(removerTeclas(),clearInterval(checarRelogio),personagem.style.backgroundImage="url(/imagens/eu2.png)",inimigo.style.display="none",audioEsperando.pause(),audioJogoNormal.pause(),audioMissaoRapido.pause(),audioGameOver.play(),audioGameOver.volume=1,botaoReiniciar.style.display="block")}function checarJogo(){1<=vidasAtual?location.reload():(botaoReiniciar.style.display="block",audioEsperando.pause(),audioJogoNormal.pause(),audioMissaoRapido.pause(),audioGameOver.play())}function removerTeclas(){document.removeEventListener("keydown",teclaPressionada),document.removeEventListener("keyup",teclaSolta)}botaoIniciar.addEventListener("click",function(){botaoIniciar.style.display="none",inimigo.classList.add("animarInimigo"),document.addEventListener("keydown",teclaPressionada),document.addEventListener("keyup",teclaSolta),checarMovimentos=setInterval(atualizarMovimentos,50),checarColisaoComBloco=setInterval(colisaoComBloco,10),checarColisaoComInimigo=setInterval(colisaoComInimigo,10),checarRelogio=setInterval(relogio,1e3),jogoIniciado=!0,audioEsperando.volume=0,audioJogoNormal.play()}),document.addEventListener("keydown",function(){jogoIniciado||"Enter"!==event.key?jogoIniciado&&"Enter"===event.key&&alert("Jogo ja Foi Iniciado!"):(botaoIniciar.style.display="none",inimigo.classList.add("animarInimigo"),document.addEventListener("keydown",teclaPressionada),document.addEventListener("keyup",teclaSolta),checarMovimentos=setInterval(atualizarMovimentos,50),checarColisaoComBloco=setInterval(colisaoComBloco,10),checarColisaoComInimigo=setInterval(colisaoComInimigo,10),checarRelogio=setInterval(relogio,1e3),jogoIniciado=!0,audioEsperando.volume=0,audioJogoNormal.play())});